(this["webpackJsonptnp-nsut"]=this["webpackJsonptnp-nsut"]||[]).push([[6],{187:function(e,t,a){e.exports=a.p+"static/media/plus-solid.d4055c0a.svg"},271:function(e,t,a){},277:function(e,t,a){},278:function(e,t,a){},279:function(e,t,a){var n={"./General.svg":280,"./Hackathon.svg":281,"./Internship.svg":282,"./Placement.svg":283,"./Shortlist.svg":284,"./Update.svg":285,"./Webinar.svg":286,"./github.svg":287,"./google-tag-manager.svg":288,"./google_analytics.svg":289,"./old_update.svg":290,"./plus-solid.svg":187};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=279},280:function(e,t,a){e.exports=a.p+"static/media/General.21efa377.svg"},281:function(e,t,a){e.exports=a.p+"static/media/Hackathon.ae37a854.svg"},282:function(e,t,a){e.exports=a.p+"static/media/Internship.808d4404.svg"},283:function(e,t,a){e.exports=a.p+"static/media/Placement.c5c9c176.svg"},284:function(e,t,a){e.exports=a.p+"static/media/Shortlist.51564fb5.svg"},285:function(e,t,a){e.exports=a.p+"static/media/Update.82a4a362.svg"},286:function(e,t,a){e.exports=a.p+"static/media/Webinar.e6274850.svg"},287:function(e,t,a){e.exports=a.p+"static/media/github.34119f98.svg"},288:function(e,t,a){e.exports=a.p+"static/media/google-tag-manager.68bcd58c.svg"},289:function(e,t,a){e.exports=a.p+"static/media/google_analytics.95a87f80.svg"},290:function(e,t,a){e.exports=a.p+"static/media/old_update.1adfd22f.svg"},329:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(62),l=a(159),o=a(63),s=a(43),c=a(32),d=a(186),m=a.n(d);a(271);var u=e=>{let{htmlText:t}=e;return r.a.createElement("div",{className:"html-text",dangerouslySetInnerHTML:{__html:m.a.sanitize(t)}})},g=a(272),p=(a(276),a(8)),f=a(66);a(277),a(278);var v=function(e){let{type:t}=e;return r.a.createElement("img",{src:a(279)(`./${t}.svg`),alt:"icon",style:{width:"80%",height:"80%"}})},h=a(17);const b="BELqxt1OA-x3CSPf2TMWA5vdZAljkYU3oNeQfY5SmT5uZm0N1LxGv_s6SU_O26z4nDQAtbCq4N-TZgbXyaOqb2M";function x(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(t),n=new Uint8Array(a.length),r=0;r<a.length;++r)n[r]=a.charCodeAt(r);return n}var y=()=>{const{state:{profileData:e}}=Object(n.useContext)(h.a),t=null===e||void 0===e?void 0:e.degree,d=null===e||void 0===e?void 0:e.campus,m=null===e||void 0===e?void 0:e.batch,y=null===e||void 0===e?void 0:e.id,[E,w]=Object(n.useState)(0);Object(n.useEffect)(()=>{(async()=>{if("serviceWorker"in navigator&&"PushManager"in window)try{const e=await navigator.serviceWorker.register("./service-worker.js",{scope:"/"});let a=!(null===await e.pushManager.getSubscription());if(a)console.log("User is already subscribed.");else{const n=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:x(b)});console.log("User is subscribed"),async function(e,t,a,n){await c.b.post("/notifications",{Batch:t,notify:e,student:a,degree:n})}(n,m,y,t),a=!0}}catch(e){console.error("Failed to register Service Worker or subscribe user:",e)}})()},[b,m]);const[_,S]=Object(n.useState)({loading:!1,data:[],error:null}),[k,O]=Object(n.useState)(!0),[N,j]=Object(n.useState)(!0),C={Placement:"#5b7cf3",Internship:"#2cc972",Update:"#77d1e8",Webinar:"#ffc111",Hackathon:"#8e5bf3"},T=Object(p.g)();Object(n.useEffect)(()=>{U()},[]);const U=async()=>{S({..._,loading:!0});try{const e=(await c.b.get(`/announcements?_sort=createdAt:desc&batch=${m}&_where[0][degrees_allowed_contains]=${t}&campus=${d}&_start=${E}&_limit=12`)).data,a=_.data;e.length<12&&O(!1),e.map(e=>a.push(e)),S({loading:!1,data:a,error:null}),w(E+12),j(!1)}catch(e){S({loading:!1,data:[],error:e}),j(!1),console.log(e)}};return _.error?r.a.createElement("div",null,r.a.createElement("h1",null,"Error in fetching notifications.")):N?r.a.createElement(f.a,null):r.a.createElement("div",null,function(){if(_.data)return r.a.createElement(r.a.Fragment,null,0!==_.data.length&&r.a.createElement(g.VerticalTimeline,{animate:!1,layout:"1-column-left"},_.data.map((e,t)=>r.a.createElement(g.VerticalTimelineElement,{contentArrowStyle:{display:"none"},contentStyle:{background:"transparent",boxShadow:"0px 4px 8px -2px rgba(16, 24, 40, 0.1), 0px 2px 4px -2px rgba(16, 24, 40, 0.06)",transform:"translateY(-5px)",padding:"15px",borderRadius:"8px"},onTimelineElementClick:()=>T.push("/"===e.redirect_url?"/companies/"+e.event_id:e.redirect_url),icon:r.a.createElement(v,{type:e.event_type}),iconStyle:{backgroundColor:C[e.event_type||"Update"],display:"flex",justifyContent:"center",alignItems:"center",width:"35px",height:"35px",borderRadius:"50%"},key:t},r.a.createElement(l.a,{className:"bg-transparent",style:{cursor:"pointer",overflowX:"hidden",borderRadius:"8px",background:"#fff"}},r.a.createElement(l.a.Body,{className:"p-0"},r.a.createElement(o.a,null,r.a.createElement(s.a,{sm:5,className:"d-flex align-items-center"},r.a.createElement("div",{className:"image bg-black rounded-circle d-flex justify-content-center align-items-center",style:{height:"50px",width:"50px",marginRight:"10px",overflow:"hidden"}},r.a.createElement("div",{className:"text-logo",style:{color:"white",fontSize:"1.8rem",fontWeight:"bolder"}},e.for.split(" ").length>1?e.for.split(" ")[0].substring(0,1)+e.for.split(" ")[1].substring(0,1):e.for.split(" ")[0].substring(0,1))),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("h5",{style:{margin:"0",fontSize:"1.1rem"}},e.title),r.a.createElement("h6",{style:{color:"#6f7274",marginTop:"4px"}},e.for))),r.a.createElement(s.a,{sm:7,className:"d-flex flex-column align-items-start"},"Placement"==e.event_type||"Internship"==e.event_type?r.a.createElement(u,{htmlText:e.content}):r.a.createElement("div",null,"Click to read more"),r.a.createElement("div",{className:"d-flex w-100 justify-content-between mt-2"},r.a.createElement("p",{style:{margin:"0px",fontWeight:"700",fontSize:"0.9rem"}},new Date(e.createdAt).toString().slice(0,15),","," ",new Date(e.createdAt).toString().slice(16,21)),r.a.createElement("div",{className:"tag border rounded px-2 py-1 "+(e.event_type||"Update"),style:{backgroundColor:"#f0f0f0",fontWeight:"bold",fontSize:"0.8rem",width:"6rem",textAlign:"center"}},e.event_type||"Update")))))))),k&&r.a.createElement(g.VerticalTimelineElement,{icon:r.a.createElement("img",{src:a(187),alt:"load_more",style:{width:"100%",height:"100%"}}),iconOnClick:U,iconStyle:{cursor:"pointer",backgroundColor:"#e44e72",width:"50px",height:"50px",borderRadius:"50%"}})))}(),function(){if(_.loading)return r.a.createElement(f.a,null)}(),function(){if(k)return r.a.createElement("div",{className:"d-flex justify-content-center mt-4"},r.a.createElement(i.a,{className:"view_more",variant:"dark",disabled:_.loading,onClick:U},_.loading?r.a.createElement(f.a,null):"View More"))}())},E=a(33),w=a.n(E);t.default=()=>{const{state:e}=Object(n.useContext)(h.a),{isLoading:t}=e;return Object(n.useEffect)(()=>{var t;!0===(null===e||void 0===e||null===(t=e.profileData)||void 0===t?void 0:t.banStatus)&&w.a.error("You are banned from this platform. Please contact the admin.")},[]),t?r.a.createElement(f.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(E.Toaster,{position:"top-right",reverseOrder:!1}),r.a.createElement("div",{className:"d-flex justify-content-center align-items-center flex-column w-80 mt-3 bg-white"},r.a.createElement("div",{className:"w-100",style:{paddingTop:"10px",paddingBottom:"10px"}},r.a.createElement(y,null))))}}}]);
//# sourceMappingURL=6.14f6915c.chunk.js.map