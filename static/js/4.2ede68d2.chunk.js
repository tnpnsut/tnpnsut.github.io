(this["webpackJsonptnp-nsut"]=this["webpackJsonptnp-nsut"]||[]).push([[4],{164:function(e,t,a){e.exports=a.p+"static/media/plus-solid.d4055c0a.svg"},173:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){var n={"./Hackathon.svg":182,"./Internship.svg":183,"./Placement.svg":184,"./Update.svg":185,"./Webinar.svg":186,"./github.svg":187,"./google-tag-manager.svg":188,"./google_analytics.svg":189,"./old_update.svg":190,"./plus-solid.svg":164};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=181},182:function(e,t,a){e.exports=a.p+"static/media/Hackathon.ae37a854.svg"},183:function(e,t,a){e.exports=a.p+"static/media/Internship.808d4404.svg"},184:function(e,t,a){e.exports=a.p+"static/media/Placement.c5c9c176.svg"},185:function(e,t,a){e.exports=a.p+"static/media/Update.82a4a362.svg"},186:function(e,t,a){e.exports=a.p+"static/media/Webinar.e6274850.svg"},187:function(e,t,a){e.exports=a.p+"static/media/github.34119f98.svg"},188:function(e,t,a){e.exports=a.p+"static/media/google-tag-manager.68bcd58c.svg"},189:function(e,t,a){e.exports=a.p+"static/media/google_analytics.95a87f80.svg"},190:function(e,t,a){e.exports=a.p+"static/media/old_update.1adfd22f.svg"},233:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(62),l=a(158),c=a(63),o=a(43),s=a(32),d=a(163),m=a.n(d);a(173);var u=e=>{let{htmlText:t}=e;return r.a.createElement("div",{className:"html-text",dangerouslySetInnerHTML:{__html:m.a.sanitize(t)}})},g=a(174),p=(a(178),a(8)),f=a(67);a(179),a(180);var v=function(e){let{type:t}=e;return r.a.createElement("img",{className:"icon-"+t,src:a(181)(`./${t}.svg`),alt:"test_icon",style:{width:"80%",height:"80%"}})},h=a(17);const b="BELqxt1OA-x3CSPf2TMWA5vdZAljkYU3oNeQfY5SmT5uZm0N1LxGv_s6SU_O26z4nDQAtbCq4N-TZgbXyaOqb2M";function x(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(t),n=new Uint8Array(a.length),r=0;r<a.length;++r)n[r]=a.charCodeAt(r);return n}var E=()=>{const{state:{profileData:e}}=Object(n.useContext)(h.a),t=null===e||void 0===e?void 0:e.degree,d=null===e||void 0===e?void 0:e.campus,m=null===e||void 0===e?void 0:e.batch,E=null===e||void 0===e?void 0:e.id,[y,w]=Object(n.useState)(0);Object(n.useEffect)(()=>{(async()=>{if("serviceWorker"in navigator&&"PushManager"in window)try{const e=await navigator.serviceWorker.register("./service-worker.js",{scope:"/"});console.log("Service Worker registered");let a=!(null===await e.pushManager.getSubscription());if(a)console.log("User is already subscribed.");else{const n=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:x(b)});console.log("User is subscribed"),async function(e,t,a,n){await s.b.post("/notifications",{Batch:t,notify:e,student:a,degree:n})}(n,m,E,t),a=!0}}catch(e){console.error("Failed to register Service Worker or subscribe user:",e)}})()},[b,m]);const[_,k]=Object(n.useState)({loading:!1,data:[],error:null}),[S,N]=Object(n.useState)(!0),[O,j]=Object(n.useState)(!0),T={Placement:"#5b7cf3",Internship:"#2cc972",Update:"#77d1e8",Webinar:"#ffc111",Hackathon:"#8e5bf3"},U=Object(p.g)();Object(n.useEffect)(()=>{C()},[]);const C=async()=>{k({..._,loading:!0});try{const e=(await s.b.get(`/announcements?_sort=createdAt:desc&batch=${m}&_where[0][degrees_allowed_contains]=${t}&campus=${d}&_start=${y}&_limit=7`)).data,a=_.data;e.length<7&&N(!1),e.map(e=>a.push(e)),k({loading:!1,data:a,error:null}),w(y+7),j(!1)}catch(e){k({loading:!1,data:[],error:e}),j(!1),console.log(e)}};return _.error?r.a.createElement("div",null,r.a.createElement("h1",null,"Error in fetching notifications.")):O?r.a.createElement(f.a,null):r.a.createElement("div",null,function(){if(_.data)return r.a.createElement(r.a.Fragment,null,0!==_.data.length&&r.a.createElement(g.VerticalTimeline,{animate:!1,layout:"1-column-left"},_.data.map((e,t)=>r.a.createElement(g.VerticalTimelineElement,{contentArrowStyle:{display:"none"},contentStyle:{background:"transparent",boxSahdow:"0px 4px 8px -2px rgb(16 24 40 / 10%), 0px 2px 4px -2px rgb(16 24 40 / 6%)",transform:"translateY(-5px)"},onTimelineElementClick:()=>U.push("/"===e.redirect_url?"/companies/"+e.event_id:e.redirect_url),icon:r.a.createElement(v,{type:e.event_type}),iconStyle:{backgroundColor:T[e.event_type||"Update"],display:"flex",justifyContent:"center",alignItems:"center"},key:t},r.a.createElement(l.a,{className:"bg-transparent",style:{cursor:"pointer",overflowX:"hidden"}},r.a.createElement(l.a.Body,{className:"p-0"},r.a.createElement(c.a,null,r.a.createElement(o.a,{sm:5},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("div",{className:"image bg-black rounded-circle d-flex justify-content-center align-items-center",style:{height:"50px",width:"50px",marginRight:"7%",overflow:"hidden",marginBottom:"7px"}},r.a.createElement("div",{className:"text-logo",style:{color:"white",fontSize:"1.8rem",fontWeight:"bolder",paddingTop:"0px"}},e.for.split(" ").length>1?e.for.split(" ")[0].substring(0,1)+e.for.split(" ")[1].substring(0,1):e.for.split(" ")[0].substring(0,1))),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("h5",null,e.title),r.a.createElement("h6",{style:{color:"#6f7274"}},e.for)))),r.a.createElement(o.a,{sm:7},r.a.createElement("div",{className:"d-flex flex-column align-items-start"},r.a.createElement(u,{htmlText:e.content}),r.a.createElement("div",{className:"d-flex w-100"},r.a.createElement("div",null,r.a.createElement("p",{style:{margin:"0px",fontWeight:"700"}},new Date(e.createdAt).toString().slice(0,15),","," ",new Date(e.createdAt).toString().slice(16,21))),r.a.createElement("div",{className:"tag border rounded px-1 "+(e.event_type||"Update")},e.event_type||"Update"))))))))),S&&r.a.createElement(g.VerticalTimelineElement,{icon:r.a.createElement("img",{src:a(164),alt:"load_more",style:{width:"100%",height:"100%"}}),iconOnClick:C,iconStyle:{cursor:"pointer",backgroundColor:"#e44e72"}})))}(),function(){if(_.loading)return r.a.createElement(f.a,null)}(),function(){if(S)return r.a.createElement("div",{className:"d-flex justify-content-center mt-4"},r.a.createElement(i.a,{className:"view_more",variant:"dark",disabled:_.loading,onClick:C},_.loading?r.a.createElement(f.a,null):"View More"))}())},y=a(33),w=a.n(y);t.default=()=>{const{state:e}=Object(n.useContext)(h.a),{isLoading:t}=e;return Object(n.useEffect)(()=>{var t;!0===(null===e||void 0===e||null===(t=e.profileData)||void 0===t?void 0:t.banStatus)&&w.a.error("You are banned from this platform. Please contact the admin.")},[]),t?r.a.createElement(f.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.Toaster,{position:"top-right",reverseOrder:!1}),r.a.createElement("div",{className:"d-flex justify-content-center align-items-center flex-column w-80 mt-3 bg-white"},r.a.createElement("div",{className:"w-100",style:{paddingTop:"10px",paddingBottom:"10px"}},r.a.createElement(E,null))))}}}]);
//# sourceMappingURL=4.2ede68d2.chunk.js.map